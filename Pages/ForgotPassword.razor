@page "/forgot-password"
@layout LoginLayout
@using System.ComponentModel.DataAnnotations

<EditForm Model="@forgotModel" OnValidSubmit="HandleForgotPassword">
    <DataAnnotationsValidator />
    <div class="login-form">
        <div class="text">Forgot Password</div>

        @if (!string.IsNullOrEmpty(message))
        {
            <div class="info-message">@message</div>
        }

        <div class="field">
            <div class="fa fa-envelope"></div>
            <InputText @bind-Value="forgotModel.Email" placeholder="Enter your email" class="input-field" />
        </div>
        <ValidationMessage For="@(() => forgotModel.Email)" />

        <button type="submit">Send Reset Link</button>

        <div class="link">
            Remembered your password? <a href="/">Login</a>
        </div>
    </div>
</EditForm>

@code {
    private ForgotPasswordModel forgotModel = new();
    private string? message;

    private List<string> existingEmails = new()
    {
        "admin1@example.com",
        "admin2@example.com",
        "user@example.com"
    };

    private void HandleForgotPassword()
    {
        if (existingEmails.Contains(forgotModel.Email, StringComparer.OrdinalIgnoreCase))
        {
            message = "Reset link sent to your email (simulated).";
        }
        else
        {
            message = "Email not found.";
        }
    }

    public class ForgotPasswordModel
    {
        [Required(ErrorMessage = "Email is required")]
        [EmailAddress(ErrorMessage = "Invalid email format")]
        public string? Email { get; set; }
    }
}
